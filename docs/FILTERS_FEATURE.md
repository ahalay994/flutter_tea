# Функциональность фильтрации в Tea App

## Обзор

В приложении Tea App была реализована полноценная функциональность фильтрации чаёв с поддержкой мультиселекта и работы в оффлайн режиме.

## Основные возможности

### Фильтры
- **Поиск по тексту**: Поиск по полям name, description, brewingGuide, temperature и weight
- **Фильтр по странам**: Мультиселект для выбора одной или нескольких стран
- **Фильтр по типам**: Мультиселект для выбора одного или нескольких типов
- **Фильтр по внешнему виду**: Мультиселект для выбора одного или нескольких внешних видов
- **Фильтр по вкусам**: Мультиселект для выбора одного или нескольких вкусов

### Основные особенности
- **Поддержка оффлайн режима**: Фильтрация работает как в онлайн, так и в оффлайн режимах
- **Пагинация**: Поддержка постраничной загрузки отфильтрованных данных
- **Индикаторы фильтрации**: Визуальные индикаторы активных фильтров в интерфейсе
- **Кнопка сброса**: Возможность сбросить все фильтры одним нажатием

## Технические детали

### Архитектура
- **LocalDatabaseService**: Новые методы для SQL-запросов с фильтрацией
- **TeaController**: Новый метод `fetchFilteredTeas` для обработки фильтрованных запросов
- **TeaApi**: Метод `getFilteredTeas` для серверных запросов
- **TeaModel**: Обновлённые методы для корректного преобразования ID в названия
- **HomeScreen**: Логика управления фильтрами и обновления списка чаёв
- **TeaFilterDrawer**: Полностью переработанный интерфейс фильтров

### Работа с ID и названиями
- В базе данных хранятся ID связанных сущностей (страны, типы, вкусы и т.д.)
- При отображении ID преобразуются в названия с использованием метаданных
- Поддержка как онлайн (с сервера), так и оффлайн (из локальной базы) метаданных

### SQL-запросы
- Сложные SQL-запросы с JOIN для фильтрации по нескольким критериям
- Поддержка поиска по нескольким полям одновременно
- Эффективная фильтрация вкусов через промежуточную таблицу tea_flavors

## Использование

1. Открыть боковое меню (drawer) в главном экране
2. Выбрать нужные фильтры:
   - Ввести текст в поле поиска
   - Выбрать страны в мультиселекте
   - Выбрать типы в мультиселекте
   - Выбрать внешний вид в мультиселекте
   - Выбрать вкусы в мультиселекте
3. Нажать "Применить фильтры"
4. Для сброса всех фильтров нажать "Сбросить фильтры"

Фильтрация работает как в онлайн, так и в оффлайн режимах, используя локальные данные, когда недоступно соединение с сервером.